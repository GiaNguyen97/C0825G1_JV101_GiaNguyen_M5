<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dense Galaxy Heart üíì‚ú®</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(circle at center, #060018, #000);
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
  }
  resize();
  window.addEventListener("resize", resize);

  // Tr√°i tim nh·ªè h∆°n
  const HEART_SCALE = 14;

  // Ki·ªÉm tra ƒëi·ªÉm n·∫±m trong tim
  function isInsideHeart(x, y) {
    x /= HEART_SCALE;
    y /= HEART_SCALE;
    return Math.pow(x*x + y*y - 1, 3) - x*x*y*y*y <= 0;
  }

  const COLORS = [
    [255,120,180],
    [180,120,255],
    [120,180,255],
    [255,200,140],
    [120,255,220],
    [255,150,100]
  ];

  const particles = [];
  const COUNT = 3200; // sao r·∫•t d√†y

  for (let i = 0; i < COUNT; i++) {
    let x, y;
    do {
      x = (Math.random() * 2 - 1) * 20;
      y = (Math.random() * 2 - 1) * 20;
    } while (!isInsideHeart(x, y));

    const color = COLORS[Math.floor(Math.random() * COLORS.length)];

    particles.push({
      ox: x,
      oy: y,
      x,
      y,
      r: Math.random() * 1.2 + 0.4,
      angle: Math.random() * Math.PI * 2,
      speed: Math.random() * 0.012 + 0.004,
      color,
      alpha: Math.random() * 0.5 + 0.5
    });
  }

  let beat = 0;

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    beat += 0.045;
    const scale = 1 + Math.sin(beat) * 0.07; // ƒë·∫≠p v·ª´a, kh√¥ng ph√¨nh to qu√°

    ctx.save();
    ctx.translate(canvas.width / 2, canvas.height / 2);
    ctx.scale(scale, scale);

    particles.forEach(p => {
      p.angle += p.speed;
      p.x = p.ox + Math.cos(p.angle) * 0.5;
      p.y = p.oy + Math.sin(p.angle) * 0.5;

      ctx.fillStyle = `rgba(${p.color[0]},${p.color[1]},${p.color[2]},${p.alpha})`;
      ctx.beginPath();
      ctx.arc(p.x * HEART_SCALE, -p.y * HEART_SCALE, p.r, 0, Math.PI * 2);
      ctx.fill();
    });

    ctx.restore();
    requestAnimationFrame(animate);
  }

  animate();
</script>

</body>
</html>
